server:
  host: "0.0.0.0"
  port: 8080
  timeout_secs: 30

# Global authentication configuration with both JWT and API Key
auth:
  # JWT configuration
  jwt:
    secret: "your-256-bit-secret-key-change-this-in-production"
    algorithm: "HS256"
    issuer: "https://your-auth-server.com"

  # API Key configuration
  api_key:
    header: "X-API-Key"
    keys:
      "sk_test_123": "Test API key"
      "sk_prod_456": "Production API key"

routes:
  # Accepts both JWT and API key (if methods list is empty, tries all available methods)
  - path: "/api/users"
    backend: "http://localhost:3000"
    methods: ["GET", "POST"]
    description: "User API - accepts JWT or API key"
    auth:
      required: true
      methods: [] # Empty means accept any configured auth method

  # Only accepts JWT
  - path: "/api/admin"
    backend: "http://localhost:3001"
    methods: ["GET", "POST", "PUT", "DELETE"]
    description: "Admin API - JWT only"
    auth:
      required: true
      methods: ["jwt"]

  # Only accepts API key
  - path: "/api/webhook"
    backend: "http://localhost:3002"
    methods: ["POST"]
    description: "Webhook endpoint - API key only"
    auth:
      required: true
      methods: ["apikey"]

  # Public endpoint
  - path: "/api/public"
    backend: "http://localhost:3000"
    methods: ["GET"]
    description: "Public API endpoint"
    # No auth field means no authentication required
