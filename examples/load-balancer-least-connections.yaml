# Load Balancer Example: Least Connections Strategy
#
# This configuration demonstrates least connections load balancing where
# requests are sent to the backend with the fewest active connections.
# This is ideal for long-lived connections or varying request processing times.

server:
  host: "0.0.0.0"
  port: 8080
  timeout_secs: 60  # Longer timeout for long-lived connections

routes:
  - path: "/api/*path"
    backends:
      - url: "http://backend-1:3000"
        weight: 1
      - url: "http://backend-2:3001"
        weight: 1
      - url: "http://backend-3:3002"
        weight: 1
    load_balancer:
      strategy: "least_connections"
    health_check:
      enabled: true
      interval_secs: 10
      timeout_secs: 3
      unhealthy_threshold: 3
      healthy_threshold: 2
      path: "/health"
      expected_status: 200
      passive_enabled: true
    description: "API service with least connections load balancing"
